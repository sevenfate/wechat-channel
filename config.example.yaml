# 微信通道配置示例
# 配置文件路径：~/.openclaw/config.yaml

channels:
  wechat-channel:
    enabled: true

    # 默认账号配置（无需 accounts 时使用）
    # WebSocket 地址（支持 http/https 或 ws/wss）
    baseUrl: "http://localhost:8080"
    robotWxid: "wxid_robot123"

    # Markdown 表格渲染：off | bullets | code
    markdown:
      tables: "code"

    # 单条消息分块长度上限（字符数）
    # textChunkLimit: 2048

    # 分块模式：length | newline
    # chunkMode: "length"

    # 私聊访问策略：pairing | allowlist | open | disabled
    dmPolicy: "allowlist"

    # 私聊允许列表（dmPolicy=allowlist 或 pairing 时生效）
    # 支持 "*" 表示允许所有人（仅在 dmPolicy=open 时推荐）
    allowFrom:
      - "wxid_user123"
      - "wxid_user456"

    # 群策略：open | disabled | allowlist
    groupPolicy: "allowlist"

    # 群允许列表（groupPolicy=allowlist 时生效）
    groups:
      "123456789@chatroom":
        allow: true
        requireMention: true
        # tools:
        #   allow:
        #     - "message.send"
        # toolsBySender:
        #   "wxid_member123":
        #     deny:
        #       - "*"
      "987654321@chatroom":
        allow: true
        requireMention: false
      "*":
        requireMention: true

    # 群成员白名单（群不在允许列表时，允许这些成员触发）
    groupMembers:
      "456789012@chatroom":
        - "wxid_member123"

    # 分块实时回复（建议开启）
    blockStreaming: true

    # 控制台日志（调试用，默认关闭）
    # consoleLog: false

    # 流式分块合并（可选）
    # blockStreamingCoalesce:
    #   minChars: 800
    #   maxChars: 1200
    #   idleMs: 1000

    # 多账号配置（可选）
    # accounts:
    #   work:
    #     baseUrl: "http://localhost:8080"
    #     robotWxid: "wxid_robot456"
    #     dmPolicy: "allowlist"
    #     allowFrom:
    #       - "wxid_user789"

# 全局消息去抖（可选）
# messages:
#   inbound:
#     # debounceMs: 600
#     # byChannel:
#     #   wechat-channel: 600
